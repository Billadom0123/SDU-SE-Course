## 图形化界面测试

1. 数据量：一名乘客一名司机
2. 生命周期：核心业务全流程

### **测试流程生命周期:**

1. 注册一位乘客用户  
2. 注册一位司机用户
3. 乘客用户登录
4. 司机用户登录
5. 乘客用户发起约车请求
   - 此时取消订单：没有司机接单时无影响
   - 此时取消订单：<u>司机已经接单</u>，同步通知司机乘客取消当前订单，并且同步删除司乘两端约车列表中的当前订单信息。
6. 司机用户点击开始听单
7. 司机用户接到订单
8. 司机用户拒绝订单，以后应该不再接到相同订单 `end`
9. 司机用户接受订单，continue
   - ​	司机取消订单时，会通知乘客此单已经被当前司机取消，删除乘客端的司机信息，并提示乘客会分配新的司机，并且<u>不会分配给原先取消订单的司机</u>

10. 司机用户接到乘客
    - 输入乘客手机尾号后四位，接到乘客
    - 此时司乘两端<u>取消订单</u>按钮消失，无法取消，点击<u>取消全部订单</u>会出现弹窗，提示当前订单乘客已经上车，无法取消

11. 司机用户驾车驶往目的地
    - 地图上为司机规划路线，起点是司机当前位置，途径点是乘客上车位置，终点是乘客下车点
12. 司机用户提交订单
    - 司机提交订单后，该订单从司机当前界面删除。进入已完成列表
13. 乘客用户提交评价(也可以选择不评价)
    -   司机点击结束订单，乘客端弹出提示评价的提示框，点击确认进入评价界面，点击取消则不评价（如果想之后完成评价，可在我的订单中查看）

14. 个人中心->我的订单
    - 司机可以查看已完成订单并联系乘客
    - 乘客可以查看已完成订单并联系司机
    - 乘客和司机可以分别删除自己端的订单并且不影响另一端的查看

**注意：**

α. 乘客用户取消指定约车请求:对应订单 `end`

β. 司机用户取消指定订单:对应订单 `end`

在这个流程中,α和β步骤是可以插入到5~11中的任何一步的，并且，在8之后，这两步带来的结果都应该是服务器响应客户端无法再取消请求/订单

所以关键点在于α和β对于7、8的影响，α对于7要考虑一个线程并发的问题，假设线程1处理了乘客取消约车请求的服务，线程2处理了司机接受订单的服务。且线程1先于线程2执行完毕，那么此时线程2将无法再接受订单，因为订单已经被取消。

再来考虑α和β对于8的影响，同样也是一个线程并发问题。司机在接到乘客前应该先确认订单是否已经撤销，然后再考虑接到乘客的业务。

### 测试结果：

​	非常完美！





